{"ast":null,"code":"import { ApolloClient, InMemoryCache, HttpLink } from '@apollo/client';\nimport { WORKSPACE_ENDPOINT, EIGHT_BASE_PUBLIC_TOKEN } from '../../shared/constants';\nimport { OnTokenEvent } from '../../shared/events/token-event';\n/**\r\n * @param {Function} getToken - Function to get the token.\r\n * @returns {object} Apollo client.\r\n */\n\nexport function createApolloClient(getToken) {\n  const httpLink = new HttpLink({\n    uri: WORKSPACE_ENDPOINT,\n    headers: {\n      authorization: `Bearer ${getToken()}`\n    }\n  });\n  const client = new ApolloClient({\n    uri: WORKSPACE_ENDPOINT,\n    link: httpLink,\n    cache: new InMemoryCache()\n  });\n  return client;\n}\nexport const client = createApolloClient(() => {\n  var _OnTokenEvent$get;\n\n  const token = ((_OnTokenEvent$get = OnTokenEvent.get()) === null || _OnTokenEvent$get === void 0 ? void 0 : _OnTokenEvent$get.token) || EIGHT_BASE_PUBLIC_TOKEN;\n  return token;\n});","map":null,"metadata":{},"sourceType":"module"}
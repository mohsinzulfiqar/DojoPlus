{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Head from 'next/head';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Error from 'next/error';\nimport { GoogleManagerNoScript, GoogleManagerScript } from '../../../shared/components/SchoolScripts';\nimport { Section } from '../../../shared/components/layout/Section';\nimport { Header } from '../../../shared/components/layout/header/Header';\nimport { SchoolHeader } from '../../../shared/components/layout/header/SchoolHeader';\nimport { MainSchool } from '../../../shared/components/layout/Main';\nimport { Container } from '../../../shared/components/layout/Container';\nimport { Footer } from '../../../shared/components/layout/Footer';\nimport { BottomNavigation } from '../../../shared/components/layout/navbars/BottomNavigation';\nimport ListView from '../../../modules/schedule/ListView';\nimport { ScheduleNavBar } from '../../../modules/schedule/components/ScheduleNavBar';\nimport http from '../../../../services/http';\n\nconst SchedulesView = ({\n  data\n}) => {\n  var _schoolLogo$;\n\n  const {\n    t\n  } = useTranslation();\n  const textSchedule = t('Schedule');\n  if (!data) return /*#__PURE__*/_jsx(Error, {\n    statusCode: 404\n  });\n  const items = data;\n  const {\n    schoolName,\n    schoolLogo,\n    phone,\n    // schoolProductRelation,\n    phoneType\n  } = items || {\n    schoolName: '',\n    schoolLogo: [{\n      url: ''\n    }],\n    phone: null,\n    schoolProductRelation: {\n      count: 0\n    },\n    phoneType: ''\n  };\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(GoogleManagerScript, {}), /*#__PURE__*/_jsx(\"title\", {\n        children: `${schoolName} ${textSchedule} Â· DOJO+`\n      })]\n    }), /*#__PURE__*/_jsxs(Section, {\n      children: [/*#__PURE__*/_jsx(GoogleManagerNoScript, {}), /*#__PURE__*/_jsxs(Header, {\n        children: [/*#__PURE__*/_jsx(SchoolHeader, {\n          schoolName: schoolName || '',\n          shcoolLogo: schoolLogo ? (_schoolLogo$ = schoolLogo[0]) === null || _schoolLogo$ === void 0 ? void 0 : _schoolLogo$.url : '/assets/logo/dojo.png'\n        }), /*#__PURE__*/_jsx(ScheduleNavBar, {})]\n      }), /*#__PURE__*/_jsx(MainSchool, {\n        children: /*#__PURE__*/_jsx(Container, {\n          isFlexGrow: true,\n          children: data ? /*#__PURE__*/_jsx(ListView, {\n            initialData: data\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            children: \"no found\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(Footer, {\n        children: /*#__PURE__*/_jsx(BottomNavigation, {\n          phoneType: phoneType ? phoneType.toLocaleUpperCase() : phoneType,\n          phoneNumber: phone // TODO migrate plan from sql to airtable\n          // plans={schoolProductRelation.count > 0}\n          ,\n          plans: false\n        })\n      })]\n    })]\n  });\n}; // This can be modified in a better way, but for reasons of time reuse the logic of the schedule view\n\n\nexport const getServerSideProps = async context => {\n  var _context$query;\n\n  const schoolId = (_context$query = context.query) === null || _context$query === void 0 ? void 0 : _context$query.schoolId;\n\n  if (typeof schoolId === 'string') {\n    try {\n      const baseUrl = `${false ? 'http' : 'https'}://${context.req.headers.host}/api/`;\n      const {\n        data\n      } = await http.get(`${baseUrl}Timetable`, {\n        params: {\n          schoolId\n        }\n      });\n      return Object.entries(data).length > 1 ? {\n        props: {\n          data\n        }\n      } : {\n        notFound: true\n      };\n    } catch (error) {\n      console.log('getServerSideProps:schoolId:error:', error);\n      return {\n        notFound: true\n      };\n    }\n  }\n\n  return {\n    notFound: true\n  };\n};\nexport default SchedulesView;","map":null,"metadata":{},"sourceType":"module"}